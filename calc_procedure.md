# レシピの計算方法について

## 1. 入力パラメータ

入力パラメータとして、以下4つの数値を与えます。

- 目標摂取カロリー [kcal]
- 目標PFCバランス
    - P: タンパク質 [%]
    - F: 脂質 [%]
    - C: 炭水化物 [%]

ここでは、トータルで1500kcalの沼を作ることを例に計算を進めていきます。

- 目標摂取カロリー : 1500 [kcal]
- 目標PFCバランス
    - P: タンパク質 : 30 [%]
    - F: 脂質 : 20 [%]
    - C: 炭水化物 : 50 [%]

## 2. 必要栄養素の計算

入力パラメータを元に、各栄養素をグラムに変換します。

変換式は以下の通りです。

- タンパク質 [g] = 目標摂取カロリー [kcal] * (タンパク質比率 [%] / 100) / 4 [kcal/g]
- 脂質 [g] = 目標摂取カロリー [kcal] * (脂質比率 [%] / 100) / 9 [kcal/g]
- 炭水化物 [g] = 目標摂取カロリー [kcal] * (炭水化物比率 [%] / 100) / 4 [kcal/g]

総カロリーが1500kcal、PFCバランスが3:2:5の場合は以下の通りです。

- タンパク質

```
1500 [kcal] * (30 [%] / 100) / 4 [kcal/g] = 112.5 [g]
```

- 脂質

```
1500 [kcal] * (20 [%] / 100) / 9 [kcal/g] = 33.3 [g]
```

- 炭水化物

```
1500 [kcal] * (20 [%] / 100) / 4 [kcal/g] = 187.5 [g]
```

## 3. 白米の計算

沼の栄養素を構成するのは主に白米と皮無し鶏むね肉ですが、まずは必要な炭水化物を満たすだけの白米の量を計算します。
白米を先に計算するのは、鶏むね肉が炭水化物をほとんど含んでいないため、白米の量を必要な炭水化物量の1パラメータのみで計算出来るためです。

白米100gあたり栄養素は以下の通りです。

- タンパク質 : 6.1 [g]
- 脂質 : 0.9 [g]
- 炭水化物 : 77.6 [g]

炭水化物187.5[g]を満たすのに必要な白米の量は以下の通りです。

```
(目標炭水化物量 / 白米単位量あたりの炭水化物量) * 白米単位量 = 必要な白米量
(187.5 / 77.6) * 100 = 241.6 [g]
```

白米はタンパク質、脂質も含んでいますので、その量を計算します。

- 白米のタンパク質量

```
(白米量 / 白米単位量) * 白米単位量あたりのタンパク質量 = 白米から摂れるタンパク質量
241.6 / 100 * 6.1 = 14.7 [g]
```

- 白米の脂質量

```
(白米量 / 白米単位量) * 白米単位量あたりの脂質量 = 白米から摂れる脂質量
241.6 / 100 * 0.9 = 2.2 [g]
```


## 4. 皮無し鶏むね肉の計算

白米の量に続いて、皮無し鶏むね肉の量を計算します。
最初に求めた各栄養素の必要量から白米の栄養素を引き算をすることで、残りの必要な栄養素量が計算できます。

- タンパク質 : 97.8 [g]
- 脂質 : 31.1 [g]
- 炭水化物 : 0 [g]

皮無し鶏むね肉100gあたり栄養素は以下の通りです。

- タンパク質 : 24.4 [g]
- 脂質 : 1.9 [g]
- 炭水化物 : 0 [g]

ここから、必要なタンパク質量を満たす皮無し鶏むね肉の量を計算します。

```
(目標タンパク質量 / 鶏むね肉単位量あたりのタンパク質量) * 鶏むね肉単位量 = 必要な鶏むね肉量
(97.8 / 24.4) * 100 = 400.8 [g]
```

皮無し鶏むね肉は脂質も含んでいますので、その量を計算します。

- 皮無し鶏むね肉の脂質量

```
(鶏むね肉量 / 鶏むね肉単位量) * 鶏むね肉単位量あたりの脂質量 = 鶏むね肉から摂れる脂質量
400.8 / 100 * 1.9 = 7.6 [g]
```

## 5. 足りない脂質量の計算

ここまでの計算で、白米で炭水化物を、鶏むね肉でタンパク質量を満たしていますが、
それぞれとても低脂質な食品のため、このままだと脂質が20%に届きません。

残り必要な脂質量を計算します。

```
31.1 - 7.6 = 23.5 [g]
```

この23.5gの脂質をなんらかの食材で補えば、完璧なPFCバランスの沼が完成です。
